<?xml version="1.0" encoding="ISO-8859-1"?>
<contextxmlserver xmlns="http://pustefix.sourceforge.net/properties200401" xmlns:cus="http://www.schlund.de/pustefix/customize" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pustefix.sourceforge.net/properties200401 http://pustefix.sourceforge.net/properties200401.xsd" version="1.0">
  
  <servletinfo depend="samplebank/conf/depend.xml" name="pfixcore_project:samplebank::servlet:config">
    <editmode allow="true"/>
  </servletinfo>
  
  <context defaultflow="DefaultFlow" authpage="login">
    <resource class="de.schlund.pfixcore.example.bank.context.ContextCustomerImpl">
      <implements class="de.schlund.pfixcore.example.bank.context.ContextCustomer"/>
    </resource>
    <resource class="de.schlund.pfixcore.example.bank.context.ContextAccountImpl">
      <implements class="de.schlund.pfixcore.example.bank.context.ContextAccount"/>
    </resource>
    <resource class="de.schlund.pfixcore.example.bank.context.ContextTestImpl">
      <implements class="de.schlund.pfixcore.example.bank.context.ContextTest"/>
    </resource>
  </context>
  
  <role name="UNRESTRICTED">
    <pageaccess names="*"/>
  </role>
  <role name="ACCOUNT">
    <pageaccess names="accountdetails"/>
  </role>
  
  <pageflow name="DefaultFlow" final="accountoverview">
    <flowstep name="accountoverview"/>
    <flowstep name="accountdetails"/>
  </pageflow>
  
  <pagerequest name="login">
    <state class="de.schlund.pfixcore.workflow.app.DefaultAuthIWrapperState"/>
    <auth>
      <authinterface prefix="login" class="de.schlund.pfixcore.example.bank.iwrapper.Login"/>
    </auth>
    <output>
      <resource node="test" class="de.schlund.pfixcore.example.bank.context.ContextTest"/>
    </output>
  </pagerequest>
  
  
  <pagerequest name="accountoverview">
    <input>
      <interface prefix="select" class="de.schlund.pfixcore.example.bank.iwrapper.SelectAccount"/>
    </input>
    <output>
      <resource node="accounts" class="de.schlund.pfixcore.example.bank.context.ContextCustomer"/>
    </output>
  </pagerequest>
  
  <pagerequest name="accountdetails">
    <input>
      <interface prefix="edit" class="de.schlund.pfixcore.example.bank.iwrapper.EditAccount"/>
    </input>
    <output>
      <resource node="details" class="de.schlund.pfixcore.example.bank.context.ContextAccount"/>
    </output>
  </pagerequest>

</contextxmlserver>
