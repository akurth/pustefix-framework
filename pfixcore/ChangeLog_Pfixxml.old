2002-05-02  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/results/XMLResult.java (XMLResult): changed constructor to
	require a boolean parameter that tells if flush should transform using the stylesheet, or
	if it should construct a xml doc containing a) the stylesheet name, b) all parameters and c) the 
	output xml document.
	(flush): implement it.

	* src/de/schlund/pfixxml/AbstractXMLServer.java (getSaveableProcessResult): changed creation of
	XMLResult accordingly. Recognizes a property xmlserver.output.externalrenderer=true if only the 
	full output document should be constructed.

2002-04-17  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/ImageGeometry.java (getImageGeometryData): added
	* src/de/schlund/pfixxml/ImageGeometryData.java (lastModified):
	added. Make use of the ImageInfo class. Provide static methods to access the geometry.

2002-04-16  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/ImageInfo.java: Added. Public Domain
	licensed image info class (see there for more info).

2002-04-12  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java (doApplyTrafo): 
	Aaaaaaaargh. Xalan IS NOT THREAD SAFE! Repeat: XALAN IS NOT THREAD
	SAFE. Entities will be swapped between two concurrent
	transformations. This is STUPID. We added a global lock to prevent concurrent trafos :-(

2002-04-11 Bernd Koecke <bk@schlund.de>
	* Added a src dircetory
	* Changed Makefiles etc. to build class files, javadoc and jar file

2002-03-21  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/targets/Target.java (resetModTime): new Method. needed to fore an update on a target.
	* de/schlund/pfixxml/targets/LeaveTarget.java (resetModTime): 
	* de/schlund/pfixxml/targets/VirtualTarget.java (resetModTime): 
	* de/schlund/pfixxml/targets/SharedLeave.java (resetModTime): 
	* de/schlund/pfixxml/targets/TargetImpl.java (resetModTime): fixed accordingly

	* de/schlund/pfixxml/IncludeDocument.java (get): try to fix some
	more occurances where we want to log the need for an include part, but fail to get it.

2002-03-15 Bernd Koecke <bk@schlund.de>
	* de/schlund/pfixxml/FactoryInitServlet: bugfix in init method.

2002-03-08 Bernd Koecke <bk@schlund.de>
	* de/schlund/pfixxml/serverutil/tomcat4/TomcatUtil.java: bugfix in package decl.

2002-03-01 Bernd Koecke <bk@schlund.de>

	* de/schlund/pfixxml/serverutil/ContainerUtil.java (ContainerUtil):
	Changed signature of some mehtods. I eleminated the unneeded session object from ome methods.
	* de/schlund/pfixxml/serverutil/jserv/TraditionalJServUtil.java (TraditionalJServUtil):
	Changed the methods because of the change in the signature of the interface.
	* de/schlund/pfixxml/serverutil/jserv/ModernJServUtil.java (ModerJServUtil):
	New file for tomcat-like encoding of the session id, but runnable with JServ
	* de/schlund/pfixxml/serverutil/tomcat4/TomcatUtil.java (TomcatUtil):
	New file for handling session id with tomcat. Handles the old rewriting from
	TraditionalJServUtil as well.
	* de/schlund/pfixxml/ServletManager.java (callProcess): Bug in handling of URI_WITH_SESSION.
	* de/schlund/pfixxml/results/XMLResult.java (XMLResult): Changes because of the changed ContainerUtil.
    
2002-02-22  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/ContextXMLServer.java (getDom): changed signature (see below)
	* de/schlund/pfixxml/XMLServer.java (getDom): changed signature (see below)
	* de/schlund/pfixxml/DerefServer.java (process): changed process signature (see below)

	* de/schlund/pfixxml/RequestRecorder.java (tryRecord): use XMLResult instead of SPDocument

	* de/schlund/pfixxml/results/XMLResult.java (XMLResult): give req and res in constructor
	(getCharacterEncoding): new method
	(getURLSessionId): new method
	(getSPDocument): new method

	* de/schlund/pfixxml/AbstractXMLServer.java (process):
	Cleanup. Remove the Response object from the process method (and
	consequently also down the getDom.) this had some consequences on
	the SaveableProcessResult, especially for the SimpleStringResult (see there).
	
	* de/schlund/pfixxml/ServletManager.java (ServletManager): changed accordingly

	* de/schlund/pfixxml/results/XMLResult.java (XMLResult): renamed from AbstractXMLResult. it's _not_ abstract.

2002-02-21  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/results/SimpleStringResult.java: new file, needs more work to implement all that's 
					                      needed/useful from HttpServletResponse
	* de/schlund/pfixxml/ServletManager.java (getSaveableProcessResult): Used here, method no longer abstract.

2002-02-20  Jens Lautenbacher  <jtl@schlund.de>

	* Big changes by bk@schlund.de. First step at enabling tomcat4 and abstract all
	  the differences away. Changed sources:
	P .cvsignore
	P Makefile
	P Makefile.local
	U config.sh
	P META-INF/pfixxml.version
	P bin/setClassPath.sh
	P de/schlund/pfixxml/AbstractXMLServer.java
	P de/schlund/pfixxml/DerefServer.java
	U de/schlund/pfixxml/SavableProcessResult.java
	P de/schlund/pfixxml/ServletManager.java
	U de/schlund/pfixxml/results/AbstractXMLResult.java
	U de/schlund/pfixxml/serverutil/ContainerUtil.java
	U de/schlund/pfixxml/serverutil/jserv/TraditionalJServUtil.java
	U de/schlund/pfixxml/serverutil/tomcat4/.cvsignore
	U lib/jserv/jsdk.jar
	U lib/tomcat4/servlet.jar

	* Cosmetical changes by me, more will follow.

2002-01-16  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/IncludeDocument.java (get): Handle gracefully the case of an 
	include file that doesn't exist at all.

2002-01-09  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/ResultForm.java (addStatusCodeEnum): commented out until we better understand what
	it does.
	(addErrorNode): Added method
	(createIncludeFromStatusCode): Added method:
	(addStatusCode): Use above.
	(addErrorInclude): Removed method
	(addParams): commented out.
	(addHiddenParams): commented out. 

2001-12-17  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/IncludeDocument.java: 
	IMPORTANT:
	
	changed <defaultproduct> -> <product name="default">
	fixed logic.
	
2001-12-14  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/targets/ProductIncludePart.java (addDependencyParent): 
	(removeDependencyParent): 
	(getAffectedTargets): 
	(ProductIncludePart): 
	removed all traces of the AssociatedPart. this is no longer used. Editor will have to 
	be strict about what subpart it edits and locks.
	(getAssociatedPart): method removed, field removed.
	
	* de/schlund/pfixxml/targets/AssociatedPart.java: 
	* de/schlund/pfixxml/targets/AssociatedPartFactory.java: 
	Removed.
	
2001-12-13  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/IncludeDocument.java (get): Changed behaviour so that auxdependencies 
	will get registered even if the part is not there yet or the file does not exist yet.

2001-12-11  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/ContextXMLServer.java (CONTEXT_SUFFIX, CONTEXT_CLASS): 
	Added as public static final String. 
	
2001-12-05  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixxml/ServletManager.java (ServletManager): SCN strikes again.
	Much more to come.
	
	* de/schlund/pfixxml/AbstractXMLServer.java (AbstractXMLServer): 
	First try at cleaning up all the string constants.
	

