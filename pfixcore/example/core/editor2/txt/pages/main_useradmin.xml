<?xml version="1.0" encoding="ISO-8859-1"?>
<include_parts xmlns:ixsl="http://www.w3.org/1999/XSL/Transform" xmlns:pfx="http://www.schlund.de/pustefix/core">
  
  <part name="logoutbutton">
    <product name="default">
      <lang name="default">
        <pfx:button mode="force" page="start" target="_top">Cancel</pfx:button>
      </lang>
    </product>
  </part>

  <part name="content">
    <product name="default">
      <lang name="default">
        <center>
          <pfx:forminput target="_top">
            <br/><br/>
            <table width="90%">
              <tr>
                <td align="center">
                  <pfx:errorbox width="400"/>
                </td>
              </tr>
              <tr>
                <td>
                  <span style="color: #ffffff; font-weight: bold;">Currently registered users:</span>
                </td>
              </tr>
              <tr>
                <td align="center">
                  <pfx:include part="displayallusers"/>
                </td>
              </tr>
            </table>
            <br/><br/>
            <table width="90%">
              <tr>
                <td>
                  <span style="color: #ffffff; font-weight: bold;">Add new user:</span>
                </td>
              </tr>
              <tr>
                <td align="center">
                  <table class="editor_box" width="100%">
                    <tr>
                      <td align="right">
                        <pfx:label name="selectuser.Username">New user id:</pfx:label>
                      </td>
                      <td>
                        <pfx:xinp class="editor_input" name="selectuser.Username" size="20" type="text"/>
                      </td>
                      <td align="right">
                        <pfx:xinp class="editor_submit" type="submit" value="Create new user">
                          <pfx:command  name="SELWRP">selectuser</pfx:command>
                          <pfx:argument name="__jumptopage">useredit</pfx:argument>
                          <pfx:argument name="selectuser.Create">1</pfx:argument>
                        </pfx:xinp>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </pfx:forminput>
        </center>
      </lang>
    </product>
  </part>
  
  <part name="displayallusers">
    <product name="default">
      <lang name="default">
        <table cellspacing="0" class="editor_box" width="100%" style="padding:0px;">
          <tr>
            <td class="editor_head">
              <b>UserId</b>
            </td>
            <td class="editor_head">
              <b>Username</b>
            </td>
            <td class="editor_head" colspan="2">
              <b>Sect/Phone</b>
            </td>
            <td align="right" class="editor_head">
              <b><pfx:label name="deluser.Id">Delete user</pfx:label></b>
            </td>
          </tr>
          <ixsl:for-each select="/formresult/users/user">
            <ixsl:variable name="class">
              <ixsl:choose>
                <ixsl:when test="(count(preceding-sibling::user) mod 2) = 0">editor_even_row</ixsl:when>
                <ixsl:otherwise>editor_odd_row</ixsl:otherwise>
              </ixsl:choose>
            </ixsl:variable>
            <tr>
              <ixsl:attribute name="class"><ixsl:value-of select="$class"/></ixsl:attribute>
              <td nowrap="nowrap" style="padding: 5px">
                <ixsl:value-of select="@id"/>
              </td> 
              <td style="padding: 5px">
                <ixsl:value-of select="@name"/>
              </td>
              <td style="padding: 5px">
                <ixsl:value-of select="@section"/> (Phone: <ixsl:value-of select="@phone"/>)
              </td>
              <td align="right" style="padding: 5px">
                <pfx:button normalclass="editor_submit" jumptopage="useredit" mode="force">
                  <pfx:command  name="SELWRP">selectuser</pfx:command>
                  <pfx:argument name="selectuser.Username"><ixsl:value-of select="@id"/></pfx:argument>Edit</pfx:button>
              </td>
              <td align="right" style="padding: 5px">
                <pfx:xinp type="check" name="delete.Username">
                  <ixsl:attribute name="value"><ixsl:value-of select="@id"/></ixsl:attribute>
                </pfx:xinp>
              </td>
            </tr>
          </ixsl:for-each>
          <tr>
            <td style="padding: 1px;" colspan="6">
              <hr/>
            </td>
          </tr>
          <tr>
            <td style="padding: 5px;" colspan="6" align="right">
              <pfx:xinp class="editor_submit" type="submit" value="Delete selected">
                <pfx:command name="SELWRP">delete</pfx:command>
              </pfx:xinp>
            </td>
          </tr>
        </table>
      </lang>
    </product>
  </part>
  
</include_parts><!--
Local Variables:
mode: xml
End:
-->
