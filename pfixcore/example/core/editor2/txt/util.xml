<?xml version="1.0" encoding="ISO-8859-1"?>
<include_parts xmlns:ixsl="http://www.w3.org/1999/XSL/Transform" xmlns:pfx="http://www.schlund.de/pustefix/core">
  <part name="displayincludes">
    <product name="default">
      <lang name="default">
        <table><tr><td class="editor_main_emph">Used includes:</td></tr></table>
        <table width="100%" class="editor_box">
          <ixsl:for-each select=".//include">
            <ixsl:variable name="ind">
              <ixsl:for-each select="ancestor::include">&#160;&#160;&#160;&#160;&#160;</ixsl:for-each>
            </ixsl:variable>
            <ixsl:variable name="class">
              <ixsl:choose>
                <ixsl:when test="(count(ancestor::include) mod 2) = 0">editor_even_row</ixsl:when>
                <ixsl:otherwise>editor_odd_row</ixsl:otherwise>
              </ixsl:choose>
            </ixsl:variable>
            <tr>
              <ixsl:attribute name="class"><ixsl:value-of select="$class"/></ixsl:attribute>
              <td nowrap="nowrap">
                <ixsl:value-of select="$ind"/>
                <pfx:button page="includes" mode="force" target="_top" frame="_top">
                  <pfx:command  name="SELWRP" page="includes">incsel</pfx:command>
                  <pfx:command  name="SELWRP" page="includes">uplinc</pfx:command>
                  <pfx:argument name="incsel.Path"><ixsl:value-of select="@path"/></pfx:argument>
                  <pfx:argument name="incsel.Part"><ixsl:value-of select="@part"/></pfx:argument>
                  <pfx:argument name="incsel.Theme"><ixsl:value-of select="@product"/></pfx:argument>
                  <pfx:anchor   frame="left_navi"><ixsl:value-of select="@path"/></pfx:anchor>
                  <ixsl:value-of select="@part"/>
                </pfx:button> (<ixsl:value-of select="@theme"/>)
              </td>
              <td>
                <ixsl:value-of select="@path"/>
              </td>
            </tr>
          </ixsl:for-each>
        </table>
        <br/>   
      </lang>
    </product>
  </part>
  
  <part name="displayimages">
    <product name="default">
      <lang name="default">
        <table><tr><td class="editor_main_emph">Used images:</td></tr></table>
        <table width="100%" class="editor_box_alpha" cellpadding="0" cellspacing="0"
               background="/core/editor/img/alpha.gif">
          <ixsl:for-each select="./image">
            <ixsl:variable name="class">
              <ixsl:choose>
                <ixsl:when test="(count(preceding::image) mod 2) = 0">editor_even_row</ixsl:when>
                <ixsl:otherwise>editor_odd_row</ixsl:otherwise>
              </ixsl:choose>
            </ixsl:variable>
            <tr valign="top">
              <td width="50%" nowrap="nowrap">
                <ixsl:attribute name="class"><ixsl:value-of select="$class"/></ixsl:attribute>
                <pfx:button page="images" target="_top" frame="_top">
                  <pfx:command  name="SELWRP" page="images">selectimage</pfx:command>
                  <pfx:argument name="selectimage.Path"><ixsl:value-of select="@path"/></pfx:argument>
                  <pfx:anchor   frame="left_navi"><ixsl:value-of select="@path"/></pfx:anchor>
                  <ixsl:value-of select="@path"/>
                </pfx:button>
              </td>
              <td width="50%">
                <ixsl:choose>
                  <ixsl:when test="@modtime = 0">
                    <span class="editor_missing_img_txt">MISSING IMAGE</span>
                  </ixsl:when>
                  <ixsl:otherwise>
                    <img border="0">
                      <ixsl:attribute name="src">/<ixsl:value-of select="@path"/>?<ixsl:value-of select="@modtime"/></ixsl:attribute>
                    </img>
                  </ixsl:otherwise>
                </ixsl:choose>
              </td>
            </tr>
          </ixsl:for-each>
        </table>
        <br/>
      </lang>
    </product>
  </part>
  
  <part name="displayaffectedpages">
    <product name="default">
      <lang name="default">
        <table><tr><td class="editor_main_emph">Affected pages:</td></tr></table>
        <table width="100%" class="editor_box">
          <ixsl:for-each select="./project">
            <ixsl:sort select="@name"/>
            <ixsl:variable name="theproduct"><ixsl:value-of select="@name"/></ixsl:variable>
            <ixsl:if test="./node()">
              <tr>
                <td>
                  <table><tr><td><b>Pages in project  "<i><ixsl:value-of select="/formresult/projects/project[@name=$theproduct]/@comment"/></i>":</b></td></tr></table>
                  <table width="100%" class="editor_box">
                    <tr>
                      <td>
                        <ixsl:for-each select="./page">
                          <ixsl:sort select="@name"/>
                          <ixsl:choose>
                            <ixsl:when test="/formresult/projects/currentproject/@name = $theproduct">
                              <pfx:button page="pages" target="_top" frame="_top">
                                <pfx:argument name="selectpage.PageName"><ixsl:value-of select="@name"/></pfx:argument>
                                <pfx:argument name="selectPage.VariantName"><ixsl:value-of select="@variant"/></pfx:argument>
                                <pfx:anchor   frame="left_navi"><ixsl:value-of select="@name"/></pfx:anchor>
                                <span>
                                  <ixsl:value-of select="@name"/>
                                  <ixsl:if test="@variant">::<ixsl:value-of select="@variant"/></ixsl:if>
                                </span>
                                </pfx:button>&#160;
                            </ixsl:when>
                            <ixsl:otherwise>
                              <pfx:button page="jumptopage" target="_top" frame="_top">
                                <pfx:argument name="selectproject.ProjectName"><ixsl:value-of select="$theproduct"/></pfx:argument>
                                <pfx:argument name="selectpage.PageName"><ixsl:value-of select="@name"/></pfx:argument>
                                <pfx:argument name="selectpage.VariantName"><ixsl:value-of select="@variant"/></pfx:argument>
                                <pfx:anchor   frame="left_navi"><ixsl:value-of select="@name"/></pfx:anchor>
                                <span>
                                  <ixsl:value-of select="@name"/>
                                  <ixsl:if test="@variant">::<ixsl:value-of select="@variant"/></ixsl:if>
                                </span>
                                </pfx:button>&#160;
                            </ixsl:otherwise>
                          </ixsl:choose>
                        </ixsl:for-each>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </ixsl:if>
          </ixsl:for-each>
        </table>
        <br/>
      </lang>
    </product>
  </part>
  
  <part name="perm_denied_usedby_other_prods">
    <product name="default">
      <lang name="default">
        <table class="core_errorbox_table" width="100%">
          <tr valign="top">
            <td class="core_errorbox_td">
              <img src="/core/img/error.gif"/>
            </td>
            <td  class="core_errorlabel_text">
              Permission denied!
            </td>
          </tr>
          <tr>
            <td colspan="2">
              This object is used by projects you are not allowed to edit.
            </td>
          </tr>
        </table>
      </lang>
    </product>
  </part>
  
</include_parts>