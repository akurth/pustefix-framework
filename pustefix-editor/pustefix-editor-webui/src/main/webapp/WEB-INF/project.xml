<?xml version="1.0" encoding="utf-8"?>
<project-config
  xmlns="http://www.pustefix-framework.org/2008/namespace/project-config"
  xmlns:jee="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
>
  
  <project>
    <name>editor2</name>
    <description>Pustefix CMS</description>
    <choose>
      <when test="$mode = 'prod'">
        <enabled>false</enabled>
      </when>
    </choose>
  </project>
  
  <editor>
    <enabled>false</enabled>
    <location>http://cms.${fqdn}/</location>
  </editor>
  
  <xml-generator>
    <config-file>docroot:/WEB-INF/depend.xml</config-file>
    <choose>
      <when test="$mode='prod'">
        <!-- Set this to false if you want to skip the check for changed stylesheets on every request -->
        <check-modtime>false</check-modtime>
      </when>
    </choose>
  </xml-generator>
  
  <http-server>
    
    <choose>
      <when test="pfx:isSet('pustefix.editor.address')">
        <http-port>
          <address>${pustefix.editor.address}</address>
        </http-port>
      </when>
      <otherwise>
        <http-port>
          <address>${fqdn}</address>
        </http-port>
      </otherwise>
    </choose>
    
    <choose>
      <when test="pfx:isSet('pustefix.editor.servername')">
        <server-name>${pustefix.editor.servername}</server-name>
      </when>
      <otherwise>
        <server-name>cms.${fqdn}</server-name>
      </otherwise>
    </choose>
    
    <choose>
      <when test="pfx:isSet('pustefix.editor.serveralias')">
        <server-alias>${pustefix.editor.serveralias}</server-alias>
      </when>
      <otherwise>
        <server-alias>cms.${machine}</server-alias>
      </otherwise>
    </choose>
    
  </http-server>
  
  <application>
    
    <docroot-path>docroot:/docroot</docroot-path>
    <default-path>/xml/main</default-path>
    
    <context-xml-service>
      <path>/xml/main</path>
      <config-file>docroot:/WEB-INF/edit.conf.xml</config-file>
      <additional-trail-info>de.schlund.pfixxml.perflogging.DefaultAdditionalTrailInfoImpl</additional-trail-info>
      <choose>
        <when test="$mode='prod'">
          <session-cleaner-timeout>20</session-cleaner-timeout>
        </when>
        <otherwise>
          <session-cleaner-timeout>600</session-cleaner-timeout>
        </otherwise>
      </choose>
    </context-xml-service>
    
    <deref-service>
      <path>/xml/deref</path>            <!-- optional: default is /xml/deref -->
      <signkey>987foobarbaz123</signkey> <!-- mandatory -->
      <validtime>3600</validtime>        <!-- optional: default is 3600 (seconds) -->
      <mustsign>false</mustsign>         <!-- optional: default is false -->
    </deref-service>

    <static>
      <path>img</path>
      <path>script</path>
    </static>

  </application>

  <properties>
    <!-- Defines SSL ports used for redirect corresponding to the unsecure ports -->
    <prop name="pfixcore.ssl_redirect_port.for.8080">8443</prop>
    <prop name="pfixcore.ssl_redirect_port.for.9080">9443</prop>
  </properties>
  
</project-config>
