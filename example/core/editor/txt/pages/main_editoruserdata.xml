<?xml version="1.0" encoding="ISO-8859-1"?>
<include_parts xmlns:ixsl="http://www.w3.org/1999/XSL/Transform" xmlns:pfx="http://www.schlund.de/pustefix/core">
  
  <part name="logoutbutton">
    <product name="default">
      <lang name="default">
        <pfx:button mode="force" page="editoruserdata" target="_top">
          <pfx:command name="SELWRP">cancel</pfx:command>
          <pfx:argument name="cancel.Cancel">true</pfx:argument>Cancel</pfx:button>
      </lang>
    </product>
  </part>

  <part name="content">
    <product name="default">
      <lang name="default">
  <center>
    <pfx:forminput target="_top">
      <displaycurrentuserforedit/><br/>
      <table width="400">
        <tr>
          <td>
            <span style="color: #ffffff; font-weight: bold;">Change your userdata below:</span>
          </td>
        </tr>
        <tr>
          <td align="center">
            <ixsl:variable name="admin_session" select="/formresult/cr_editorsession/user/permissions/global/@admin = 'true'"/>
            <table class="editor_box" width="100%">
              <tr>
                <td colspan="2">
                  <b>User information:</b><br/><br/>
                </td>
              </tr>
              <ixsl:if test="/formresult/formerrors/error">
                <tr>
                  <td colspan="2">
                    <pfx:errorbox/><br/>
                  </td>
                </tr>
              </ixsl:if>
              <tr>
                <td align="right" width="20%">
                  <pfx:label name="change.Name">Name:</pfx:label>
                </td>
                <td>
                  <pfx:xinp class="editor_input" name="change.Name" type="text"/>
                </td>
              </tr>
              <tr>
                <td align="right">
                  <pfx:label name="change.Sect">Section:</pfx:label>
                </td>
                <td>
                  <pfx:xinp class="editor_input" name="change.Sect" type="text"/>
                </td>
              </tr>
              <tr>
                <td align="right">
                  <pfx:label name="change.Phone">Phone:</pfx:label>
                </td>
                <td>
                  <pfx:xinp class="editor_input" name="change.Phone" type="text"/>
                </td>
              </tr>
              <tr>
                <td align="right">
                  <pfx:label name="change.Pass1">Pwd:</pfx:label>
                </td>
                <td>
                  <input class="editor_input_pwd" name="change.Pass1" type="password"/>
                </td>
              </tr>
              <tr>
                <td align="right">
                  <pfx:label name="change.Pass2">Pwd (Rep.):</pfx:label>
                </td>
                <td>
                  <input class="editor_input_pwd" name="change.Pass2" type="password"/>
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <br/>
                  <b>Common rights:</b><br/><br/>
                </td>
              </tr>
              <tr>
                <td align="right" valign="top">
                  <pfx:xinp name="change.Admin" type="check" value="true">
                    <ixsl:if test="not($admin_session)">
                      <ixsl:attribute name="disabled"/>
                    </ixsl:if>
                  </pfx:xinp>
                </td>
                <td>
                  <pfx:label name="change.Admin">User has admin role.</pfx:label>
                </td>
              </tr>
              <tr>
                <td align="right" valign="top">
                  <pfx:xinp name="change.DynInclDef" type="check" value="true">
                    <ixsl:if test="not($admin_session)">
                      <ixsl:attribute name="disabled"/>
                    </ixsl:if>
                  </pfx:xinp>
                </td>
                <td>
                  <pfx:label name="change.DynInclDef">User is allowed to edit the default branch of DynIncludes.</pfx:label>
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <br/><b>Project specific rights:</b><br/><br/>
                </td>
              </tr>
              <tr>
                <td colspan="2"> 
                  <table cellspacing="0" width="100%">
                    <tr>
                      <td class="editor_head"><b>Project</b></td>
                      <td align="center" class="editor_head"><b>Edit Includes</b></td>
                      <td align="center" class="editor_head"><b>Edit Images</b></td>
                      <td align="center" class="editor_head"><b>Edit DynIncludes</b></td>
                    </tr>
                    <ixsl:for-each select="/formresult/cr_editorsession/allproducts/product">
                      <ixsl:variable name="id"><ixsl:value-of select="@name"/></ixsl:variable>
                      <tr>
                        <ixsl:choose>
                          <ixsl:when test="position() mod 2 = 1">
                            <ixsl:attribute name="class">editor_even_row</ixsl:attribute>
                          </ixsl:when>
                          <ixsl:otherwise>
                            <ixsl:attribute name="class">editor_odd_row</ixsl:attribute>
                          </ixsl:otherwise>
                        </ixsl:choose>
                        <td>
                          <ixsl:value-of select="@name"/>
                        </td>
                        <td align="center">
                          <input type="checkbox">
                            <ixsl:attribute name="name"><ixsl:value-of select="concat('change.editincl.', $id)"/></ixsl:attribute>
                            <ixsl:attribute name="value">true</ixsl:attribute>
                            <ixsl:if test="not($admin_session)">
                              <ixsl:attribute name="disabled"/>
                            </ixsl:if> 
                            <ixsl:if test="/formresult/formvalues/param[@name = concat('change.editincl.', $id)] = 'true'">
                              <ixsl:attribute name="checked">checked</ixsl:attribute>
                            </ixsl:if>
                          </input>
                        </td>
                        <td align="center">
                          <input type="checkbox">
                            <ixsl:attribute name="name"><ixsl:value-of select="concat('change.editimg.', $id)"/></ixsl:attribute>
                            <ixsl:attribute name="value">true</ixsl:attribute>
                            <ixsl:if test="not($admin_session)">
                              <ixsl:attribute name="disabled"/>
                            </ixsl:if> 
                            <ixsl:if test="/formresult/formvalues/param[@name = concat('change.editimg.', $id)] = 'true'">
                              <ixsl:attribute name="checked">checked</ixsl:attribute>
                            </ixsl:if>
                          </input>
                        </td>
                        <td align="center">
                          <input type="checkbox">
                            <ixsl:attribute name="name"><ixsl:value-of select="concat('change.editcom.', $id)"/></ixsl:attribute>
                            <ixsl:attribute name="value">true</ixsl:attribute>
                            <ixsl:if test="not($admin_session)">
                              <ixsl:attribute name="disabled"/>
                            </ixsl:if> 
                            <ixsl:if test="/formresult/formvalues/param[@name = concat('change.editcom.', $id)] = 'true'">
                              <ixsl:attribute name="checked">checked</ixsl:attribute>
                            </ixsl:if>
                          </input>
                        </td>
                      </tr>
                    </ixsl:for-each>
                  </table>
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <hr/>
                </td>
              </tr>
              <tr>
                <td align="right" colspan="2">
                  <pfx:xinp class="editor_submit" type="submit" value="Submit data">
                    <pfx:command name="SELWRP">change</pfx:command>
                  </pfx:xinp>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </pfx:forminput>
  </center>
</lang>
    </product>
  </part>
  
</include_parts><!--
Local Variables:
mode: xml
End:
-->